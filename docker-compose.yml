version: '3'
services:
######################################
# PHP-FPM Container
######################################
  php-fpm:
    container_name: php-fpm
    network_mode: bridge
    image: petronetto/php7-alpine
    environment:
      XDEBUG_ENABLE: 1
      XDEBUG_HOST: ${MY_IP} # .env
      XDEBUG_REMOTE_PORT: 9000
    volumes:
      - ./example:/app
######################################
# NGINX Container
######################################
  nginx:
    container_name: nginx
    network_mode: bridge
    build: ./nginx
    links:
      - php-fpm
    volumes:
      - ./example:/app
    ports:
      - 8080:8080
######################################
# Caddy Container
######################################
  caddy:
    container_name: caddy
    network_mode: bridge
    build: ./caddy
    links:
      - php-fpm
    volumes:
      - ./example:/app
    ports:
      - 8000:8080
